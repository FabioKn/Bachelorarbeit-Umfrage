<!-- docs/viewer.html -->
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>3D-Betrachtung</title>
  <script type="module" src="js/supabase-client.js"></script>
  <style>
    #timer {
      font-size: 1.5em;
      margin-top: 2em;
    }
  </style>
</head>
<body>
  <h1>Sieh genau hin</h1>
  <p>Du hast 30 Sekunden Zeit, um dir das Bild einzuprägen.</p>
  <p><strong>Bitte konzentriere dich!</strong></p>

  <div id="viewer-container">
  <img src="cossi.png" alt="Platzhalterbild der Szene" width="960" height="600" style="border:1px solid #ccc;" />
</div>

  <div id="timer">Die Szene verschwindet in <span id="seconds">20</span> Sekunden…</div>

  <script type="module">
    import { createParticipant } from './js/supabase-client.js'

    if (!sessionStorage.getItem('participant_id')) {
      await createParticipant()
    }

    let seconds = 20
    const secondsDisplay = document.getElementById('seconds')

    const interval = setInterval(() => {
      seconds--
      secondsDisplay.textContent = seconds
      if (seconds <= 0) {
        clearInterval(interval)
        window.location.href = "klick.html"
      }
    }, 1000)
  </script>
</body>
</html>
